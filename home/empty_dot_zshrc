set -o vi

eval "$(starship init zsh)"
eval "$(zoxide init zsh)"

export EDITOR="nvim"
export GOPATH="$HOME/.local/go"
export PATH="$PATH:$GOPATH/bin:$HOME/.local/bin"
export NIX_PATH=nixos-config=$HOME/.config/nixos/configuration.nix
export PASSWORD_STORE_DIR="$HOME/github.com/yagoyudi/pass"
export STARSHIP_CONFIG=$HOME/.config/starship/config.toml
export TZ="America/Sao_Paulo"
export GIT_PAGER="cat"

#alias docker='nerdctl'
alias sudo='doas'
alias sudoedit='doas rnano'
alias ls="eza"
alias grep="grep --color=auto"
alias e=$EDITOR
alias k="kubecolor"
alias c="chezmoi"
alias weather="curl wttr.in"

source <(kubectl completion zsh)

with_netbox() {
  export NETBOX_TOKEN=$(gopass NETBOX_TOKEN)
  export NETBOX_URL="https://netbox.c3sl.ufpr.br"

  if [ "$#" -gt 0 ]; then
    "$@"
  fi
}

with_gitlab() {
  export GITLAB_USERNAME=yyvf
  export GITLAB_ACCESS_TOKEN=$(gopass GITLAB_TOKEN)

  if [ "$#" -gt 0 ]; then
    "$@"
  fi
}

with_netbox_gitlab() {
  with_netbox
  with_gitlab

  "$@"
}
